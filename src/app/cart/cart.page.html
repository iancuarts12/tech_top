<ion-content [fullscreen] = "true">
  <nav class="nav-bar">
    <div class="tech-top">
      <P><a [routerLink]="['/home']" routerLinkActive="router-link-active">TECH<span>TOP</span></a></P>
    </div>

    <div class="nav-items">
      <ul>
        <li><a [routerLink]="['/product-general']" routerLinkActive="router-link-active">PRODUCTS</a></li>
        <li><a [routerLink]="['/about']" routerLinkActive="router-link-active">ABOUT US</a></li>
        <li><a [routerLink]="['/cart']">CART</a></li>
      </ul>
    </div>
  </nav>
  <app-phone-nav></app-phone-nav>


  <!--Main Contents Below-->

    <div class="image-panel">
    <div class="overlay"></div>
    <p class="title">CART</p>
  </div>

  <div class = "content">
    <div class="cart-products">
      <div *ngIf="cartItems.length === 0" class="empty-cart">
        <p style="color: black">Your cart is empty.</p>
      </div>

      <div *ngFor="let item of cartItems" class="product-card" >
        <div class="product-image">
          <img [src]="item.image" [alt]="item.name" />
        </div>
        <div class="product-description">
          <div class="top-row">
            <span class="product-name">{{ item.name }}</span>
            <span class="product-price">{{ item.price }}</span>
          </div>
          <div class="brand">{{ item.brand }}</div>
          <ul class="specs">
            <li *ngFor="let spec of item.specs">{{ spec }}</li>
          </ul>
          <div class="reviews-checkout">
            <div class="reviews-info">
              <div class="stars">
                <ion-icon name="star"></ion-icon>
                <ion-icon name="star"></ion-icon>
                <ion-icon name="star"></ion-icon>
                <ion-icon name="star"></ion-icon>
                <ion-icon name="star-half"></ion-icon>
              </div>
              <a [href]="item.moreInfo" target="_blank" class="more-info">MORE INFO</a>
            </div>
            <ion-button size="small" (click)="removeFromCart(item)">
              REMOVE FROM CART
            </ion-button>
          </div>
        </div>
      </div>



    </div>
    <div class="cart-divider"></div>
    <div class="cart-details">
      <div class="ordersum"><h1 class="order-summary">ORDER SUMMARY</h1></div>
      <div class="details-fee">
      <div class="summary">
        <p>Quantity ({{ cartItems.length }})</p>
        <p>Shipping & Handling</p>
        <p>Total before tax</p>
        <p>Estimated tax (10%)</p>
      </div>
      <div class="amount">
      <p>₱{{ totalProductPrice.toFixed(2) }}</p>
      <p>₱{{ shippingHandling.toFixed(2) }}</p>
      <p>₱{{ totalBeforeTax.toFixed(2) }}</p>
      <p>₱{{ estimatedTax.toFixed(2) }}</p>
      </div>
    </div>

    <div class="summary-divider">
    </div>

    <div class="total-summary">
    <div class="total-title">Total</div>
    <div class="total-price">₱{{ (totalBeforeTax + estimatedTax).toFixed(2) }}</div>
  </div>

    </div>



    <ion-button expand="block" (click)="setOpen(true)" class="cart-details-btn">Cart Details</ion-button>
    <ion-modal [isOpen]="isModalOpen">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>CART</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setOpen(false)" style="color: black">Close</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <div class="cart-details-modal">
            <div class="ordersum"><h1 class="order-summary">ORDER SUMMARY</h1></div>
            <div class="details-fee">
            <div class="summary">
              <p>Quantity ({{ cartItems.length }})</p>
              <p>Shipping & Handling</p>
              <p>Total before tax</p>
              <p>Estimated tax (10%)</p>
            </div>
            <div class="amount">
            <p>₱{{ totalProductPrice.toFixed(2) }}</p>
            <p>₱{{ shippingHandling.toFixed(2) }}</p>
            <p>₱{{ totalBeforeTax.toFixed(2) }}</p>
            <p>₱{{ estimatedTax.toFixed(2) }}</p>
            </div>
          </div>

          <div class="summary-divider">
          </div>

          <div class="total-summary">
          <div class="total-title">Total</div>
          <div class="total-price">₱{{ (totalBeforeTax + estimatedTax).toFixed(2) }}</div>
        </div>

          </div>
        </ion-content>
      </ng-template>
    </ion-modal>

  </div>

  </ion-content>
